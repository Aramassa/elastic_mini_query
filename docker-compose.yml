version: "3"
services: 
  app:
    image: mosac/rails-start:2.6.3-rails5.2.3
    working_dir: /app
    env_file:
      - .docker-env
    entrypoint: ""
    command:  /bin/sh -c "bundle install && while true; do echo hello world; sleep 10; done"
    depends_on: 
      - elasticsearch
    volumes:
      - ./:/app

  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.1.1
    environment: 
      "discovery.type": "single-node"
    ports:
      - 9200:9200
      - 9300:9300
    volumes:
      - ./spec/es_scripts:/es_scripts
